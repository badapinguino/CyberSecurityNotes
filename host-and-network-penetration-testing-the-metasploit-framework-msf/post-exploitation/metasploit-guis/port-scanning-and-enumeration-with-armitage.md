# Port Scanning & Enumeration With Armitage

<figure><img src="../../../.gitbook/assets/image (6) (1) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Vedremo il laboratorio di pivoting usando Armitage, così ci è anche più facile capire graficamente i passaggi.

## Enumeration e Vulnerability Scanning

```
service postgresql start && msfconsole
db_status
//in un secondo tab:
armitage
```

<figure><img src="../../../.gitbook/assets/image (2) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

La seconda vittima è possibile raggiugnerla solo tramite la Victim 1.

<figure><img src="../../../.gitbook/assets/image (3) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (4) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (5) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (6) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Ci viene chiesta conferma per la connessione al DB di Metasploit Framework, premiamo "Connect".

<figure><img src="../../../.gitbook/assets/image (7) (1) (1).png" alt=""><figcaption></figcaption></figure>

Confermiamo "Yes".

<figure><img src="../../../.gitbook/assets/image (8) (1) (1).png" alt=""><figcaption></figcaption></figure>

Sulla sinistra ci sono tutti vari moduli raggruppati per categorie, ed è possibile anche cercare un modulo:

<figure><img src="../../../.gitbook/assets/image (9) (1) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (10) (1) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (11) (1) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (12) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (13) (1).png" alt=""><figcaption></figcaption></figure>

Il menù Attacks consente di fare vulnerability scanning, e poi c'è l'opzione "Hail Mary" che manda tutti gli exploit applicabili al target, ma non è raccomandabile utilizzarla.

<figure><img src="../../../.gitbook/assets/image (15) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (16) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (14) (1).png" alt=""><figcaption></figcaption></figure>

***

Aggiungiamo un host con Hosts > Add Hosts:

<figure><img src="../../../.gitbook/assets/image (17) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (18) (1).png" alt=""><figcaption></figcaption></figure>

Possiamo fare click destro sul PC visualizzato e vedere i servizi trovati, ovviamente appariranno dopo aver fatto service enumeration:

<figure><img src="../../../.gitbook/assets/image (19) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (20) (1).png" alt=""><figcaption></figcaption></figure>

Possiamo anche settare una label con click dx > Host > Label

<figure><img src="../../../.gitbook/assets/image (22) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (23) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (21) (1).png" alt=""><figcaption></figcaption></figure>

Facciamo ora uno scan semplice con tcp port scan:

<figure><img src="../../../.gitbook/assets/image (24) (1).png" alt=""><figcaption></figcaption></figure>

E a seguito dello scan le informazioni vengono aggiunte su Services:

<figure><img src="../../../.gitbook/assets/image (25) (1).png" alt=""><figcaption></figcaption></figure>

Alternativamente potrei lanciare io un modulo tcp port scan usando la barra a sinistra con i moduli e poi personalizzando le opzioni:

<figure><img src="../../../.gitbook/assets/image (26) (1).png" alt=""><figcaption></figcaption></figure>

Intanto ha finito lo scna di prima:

<figure><img src="../../../.gitbook/assets/image (27) (1).png" alt=""><figcaption></figcaption></figure>

Potremmo utilizzare vari moduli auxiliary per avere la service enumeration facendo grap dei banner ad esempio.&#x20;

PS: Meglio fare un task alla volta perché Armitage è un po' lentino, è fatto in Java.

Oppure possiamo usare nmap per farlo velocemente al posto nostro:

<figure><img src="../../../.gitbook/assets/image (28) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (29) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (30).png" alt=""><figcaption></figcaption></figure>

Ha finito lo scan e possiamo vedere il risultato, tra i servizi c'è anche Rejetto file server httpd 2.3.

L'icona del PC è stata aggiornata perché ora conosciamo il sistema operativo, la forma dell'icona di windows cambia anche in base alla versione (es. Windows 7 o Windows 8 sono diverse).

<figure><img src="../../../.gitbook/assets/image (31).png" alt=""><figcaption></figcaption></figure>

Ora proviamo ad usare Attacks > Find Attacks

<figure><img src="../../../.gitbook/assets/image (32).png" alt=""><figcaption></figcaption></figure>

E dopo l'esecuzione ci mostra facendo click con tasto DX sulla Victim-1 l'opzione Login. Ma non troviamo l'opzione Attack perché non ha trovato degli attacchi che possano exploitare automaticamente la vittima, vorrà dire che dovremo fare ancora un po' di manual vulnerability scanning.

<figure><img src="../../../.gitbook/assets/image (33).png" alt=""><figcaption></figcaption></figure>

Cerchiamo quindi a mano l'exploit per Rejetto hfs, e lo usiamo:

<figure><img src="../../../.gitbook/assets/image (34).png" alt=""><figcaption></figcaption></figure>

E possiamo impostare le varie options.

