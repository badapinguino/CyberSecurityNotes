# Netcat Fundamentals

<figure><img src="../../.gitbook/assets/image (1284).png" alt=""><figcaption></figcaption></figure>



```
nc --help
man nc
nc -v ##verbose output
nc -u ##per specificare una UDP port
nc -l ##listener
nc -n ##no dns resolution degli ip via DNS
nc -e ##consente di eseguire un comando
```

<figure><img src="../../.gitbook/assets/image (1285).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (1287).png" alt=""><figcaption></figcaption></figure>

## Connettersi alle porte con netcat per banner grabbing

```
nc 10.4.20.244 80 ##test per connettersi ad una porta 80, ma non otteniamo nessun banner
nc -n -v 10.4.20.244 80 ##ci mostra il connection status
nc -nv 10.4.20.244 21 ##check ftp
nc -nvu 10.4.20.244 139 ##check UDP port 139
nc -nvu 10.4.20.244 445
nc -nvu 10.4.20.244 161
```

<figure><img src="../../.gitbook/assets/image (1288).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (1289).png" alt=""><figcaption></figcaption></figure>

Check UDP port connection:

<figure><img src="../../.gitbook/assets/image (1290).png" alt=""><figcaption></figcaption></figure>

## Set up a listener to a TCP/UDP port

### Come prima cosa dobbiamo trasferire netcat su Windows perché non è preinstallato

Cerchiamo il windows binary su linux di netcat e lo trasferiamo tramite web server python

```
ls -al /usr/share/windows-binaries/
cd /usr/share/windows-binaries/
python -m SimpleHTTPServer 80
```

<figure><img src="../../.gitbook/assets/image.png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (2).png" alt=""><figcaption></figcaption></figure>

Scarichiamo il file da Windows o via browser o via CMD:

```cmd
cd Desktop
certutil -urlcache -f http://10.10.3.3/nc.exe nc.exe
nc.exe -help #è scaricato e funziona correttamente
```

<figure><img src="../../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>

### Come impostare il listener

```
##Su Linux
nc -nvlp 1234  ##-nvlp per listener
    ##Su Windows
    nc.exe -nv 10.10.3.3 1234  ##-nv per connettersi al listener
##Su Linux vediamo che ha ricevuto una connessione

nc -nvlup 1234 ##per listener su porta UDP 1234
nc -nvu 10.10.3.3 1234 ##per connettersi al listener su porta UDP
```

<figure><img src="../../.gitbook/assets/image (4).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (5).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (6).png" alt=""><figcaption></figcaption></figure>

Una volta che è stato connesso una sistema con un altro, ogni carattere scritto viene replicato sull'altra macchina:

<figure><img src="../../.gitbook/assets/image (7).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (8).png" alt=""><figcaption></figcaption></figure>

## Trasferire file via Netcat

Il sistema che deve ricevere i file deve avere il listener, il sistema che vuole inviare il file deve connettersi al listner

```
##sistema che riceve
nc.exe -nlvp 1234 > test.txt ##redirezioniamo l'output su un file

##sistema che invia
vim test.txt
nc -nv 10.4.20.244 1234 < test.txt ##diamo in input il file alla connessione verso il listener
```

{% hint style="warning" %}
netcat è utile anche per trasferire executable
{% endhint %}

<figure><img src="../../.gitbook/assets/image (9).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (10).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (11).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (13).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (12).png" alt=""><figcaption></figcaption></figure>
